- name: install and run nginx in multiple servers
  hosts: localhost
  become: yes
  tasks:
  - name: install nginx package
    ansible.legacy.dnf:
      name: nginx
      state: present
      update_cache: yes
  - name: run nginx
    ansible.builtin.service:
       name: nginx
       msg: "value of state must be one of: reloaded, restarted, started, stopped, got: latest"

  - name: Open firewall for HTTP and HTTPS
    ansible.builtin.firewalld:
        service: "{{ item }}"
        permanent: yes
        state: enabled
    loop:
    - http
    - https
    